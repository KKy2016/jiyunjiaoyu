<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			div{
				width: 200px;
				height: 200px;
				background: red;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<div>
			
		</div>
	</body>
	<script src="js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		let arr = [];
		$("div").on("mousedown",function(ev){
			let mouseX = ev.clientX,mouseY = ev.clientY;
			let boxX = $(this).offset().left,boxY = $(this).offset().top;
			// $(document).off("mousemove");
			$(document).on("mousemove",function(e){
				let mx = e.clientX - mouseX,my = e.clientY - mouseY;
				let l = boxX + mx,t = boxY + my;
				arr.push({
					l,t
				})
				$("div").css({
					left:l,
					top:t
				})
			})
		})
		$("div").on("mouseup",function(ev){
			$(document).off("mousemove");
			let timer = setInterval(function(){
				let pos = arr.pop()
				$("div").css({
					left:pos.l,
					top:pos.t
				})
				if(arr.length == 0){
					clearInterval(timer);
				}
			},30)
		})
		
	</script>
</html>